/*! mpulse v1.0.1 */

var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;return b&&c.mixIn(b),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,c){a=this.words=a||[],c!=b?this.sigBytes=c:this.sigBytes=4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,e=a.sigBytes;if(this.clamp(),d%4)for(var f=0;e>f;f++){var g=c[f>>>2]>>>24-f%4*8&255;b[d+f>>>2]|=g<<24-(d+f)%4*8}else if(c.length>65535)for(var f=0;e>f;f+=4)b[d+f>>>2]=c[f>>>2];else b.push.apply(b,c);return this.sigBytes+=e,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-c%4*8,b.length=a.ceil(c/4)},clone:function(){var a=e.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new f.init(c,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push((f>>>4).toString(16)),d.push((15&f).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new f.init(c,b/2)}},i=g.Latin1={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push(String.fromCharCode(f))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-d%4*8;return new f.init(c,b)}},j=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw new Error("Malformed UTF-8 data")}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},k=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,g=this.blockSize,h=4*g,i=e/h;i=b?a.ceil(i):a.max((0|i)-this._minBufferSize,0);var j=i*g,k=a.min(4*j,e);if(j){for(var l=0;j>l;l+=g)this._doProcessBlock(d,l);var m=d.splice(0,j);c.sigBytes-=k}return new f.init(m,k)},clone:function(){var a=e.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0}),l=(d.Hasher=k.extend({cfg:e.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new l.HMAC.init(a,c).finalize(b)}}}),c.algo={});return c}(Math);!function(a){var b=CryptoJS,c=b.lib,d=c.WordArray,e=c.Hasher,f=b.algo,g=[],h=[];!function(){function b(b){for(var c=a.sqrt(b),d=2;c>=d;d++)if(!(b%d))return!1;return!0}function c(a){return 4294967296*(a-(0|a))|0}for(var d=2,e=0;64>e;)b(d)&&(8>e&&(g[e]=c(a.pow(d,.5))),h[e]=c(a.pow(d,1/3)),e++),d++}();var i=[],j=f.SHA256=e.extend({_doReset:function(){this._hash=new d.init(g.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],g=c[3],j=c[4],k=c[5],l=c[6],m=c[7],n=0;64>n;n++){if(16>n)i[n]=0|a[b+n];else{var o=i[n-15],p=(o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3,q=i[n-2],r=(q<<15|q>>>17)^(q<<13|q>>>19)^q>>>10;i[n]=p+i[n-7]+r+i[n-16]}var s=j&k^~j&l,t=d&e^d&f^e&f,u=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22),v=(j<<26|j>>>6)^(j<<21|j>>>11)^(j<<7|j>>>25),w=m+v+s+h[n]+i[n],x=u+t;m=l,l=k,k=j,j=g+w|0,g=f,f=e,e=d,d=w+x|0}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+g|0,c[4]=c[4]+j|0,c[5]=c[5]+k|0,c[6]=c[6]+l|0,c[7]=c[7]+m|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;return c[e>>>5]|=128<<24-e%32,c[(e+64>>>9<<4)+14]=a.floor(d/4294967296),c[(e+64>>>9<<4)+15]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA256=e._createHelper(j),b.HmacSHA256=e._createHmacHelper(j)}(Math),function(){{var a=CryptoJS,b=a.lib,c=b.Base,d=a.enc,e=d.Utf8,f=a.algo;f.HMAC=c.extend({init:function(a,b){a=this._hasher=new a.init,"string"==typeof b&&(b=e.parse(b));var c=a.blockSize,d=4*c;b.sigBytes>d&&(b=a.finalize(b)),b.clamp();for(var f=this._oKey=b.clone(),g=this._iKey=b.clone(),h=f.words,i=g.words,j=0;c>j;j++)h[j]^=1549556828,i[j]^=909522486;f.sigBytes=g.sigBytes=d,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher,c=b.finalize(a);b.reset();var d=b.finalize(this._oKey.clone().concat(c));return d}})}}(),function(a){"use strict";function b(b,c){l||("function"==typeof XDomainRequest||"object"==typeof XDomainRequest?(t=!0,l=function(){return new XDomainRequest}):"function"==typeof XMLHttpRequest||"object"==typeof XMLHttpRequest?l=function(){return new XMLHttpRequest}:"function"==typeof require?l=function(){var a=require("xmlhttprequest").XMLHttpRequest;return new a}:a&&"undefined"!=typeof a.ActiveXObject&&(l=function(){return new a.ActiveXObject("Microsoft.XMLHTTP")}));var d=l();"function"==typeof c&&(t?d.onload=function(){c(d.responseText)}:d.onreadystatechange=function(){4===d.readyState&&c(d.responseText)}),d.open("GET",b,!0),d.send()}function c(a){"object"==typeof console&&"function"==typeof console.warn&&console.warn("mPulse: "+a)}function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}function e(a,b,c){if("undefined"==typeof CryptoJS||"function"!=typeof CryptoJS.HmacSHA256)return"";var d="key="+a+"&t="+c;return CryptoJS.HmacSHA256(d,b).toString()}function f(f,g,h){function i(b){return-1!==b.indexOf("http://")||-1!==b.indexOf("https://")?b:(W?b="https:"+b:"undefined"==typeof a?-1===b.indexOf("http:")&&(b="http:"+b):"undefined"!=typeof a&&"file:"===a.location.protocol&&-1===b.indexOf("http:")&&(b="http:"+b),b)}function j(){var a=V,b=+new Date;return a+=-1!==a.indexOf("?")?"&":"?",a+="key="+T,a+="&t="+b,a+="&s="+e(T,U,b),i(a)}function k(){var a=X.beacon_url;return i(a)}function l(a){try{var b=JSON.parse(a);for(var c in b)b.hasOwnProperty(c)&&(X[c]=b[c])}catch(d){return void(Z=!1)}if(ea||N(X.session_id),fa={},ha={},da={},X.PageParams){var e=X.PageParams.customMetrics,f=X.PageParams.customTimers,g=X.PageParams.customDimensions;if(e)for(s=0;s<e.length;s++){var h=e[s];fa[h.name]=h.label}if(f)for(s=0;s<f.length;s++){var i=f[s];ha[i.name]=i.label}if(g)for(s=0;s<g.length;s++){var j=g[s];da[j.name]=j.label}}Z=!0,Y=!0,setTimeout(q,n),m(x)}function q(){if(""!==V){var a=j();Y&&(a+="&r="),b(a,l)}}function t(){var a={};for(var b in ca)ca.hasOwnProperty(b)&&(a[b]=ca[b]);return a}function w(a,b,c){$.push({type:a,name:b,value:c,group:aa,ab:ba,dimensions:t(),when:+new Date})}function x(a){if(0!==$.length){if(!Z)return void((!_||a)&&(_=!0,setTimeout(function(){x(!0)},o)));var b=$.shift(),d=b.type,e=b.name,f=b.value,g={};"boolean"!=typeof b.group&&(g["h.pg"]=b.group),"boolean"!=typeof b.ab&&(g["h.ab"]=b.ab),g.when=b.when;for(var h in b.dimensions)b.dimensions.hasOwnProperty(h)&&("undefined"!=typeof da[h]?g[da[h]]=b.dimensions[h]:c("Custom Dimension '"+h+"' is not defined"));"metric"===d?"undefined"!=typeof fa[e]?(g[fa[e]]=f,y(g)):c("Custom Metric '"+e+"' is not defined"):"timer"===d&&("undefined"!=typeof ha[e]?(g.t_other=ha[e]+"|"+f,y(g)):c("Custom Timer '"+e+"' is not defined")),m(x)}}function y(a){a.d=X.site_domain,a["h.key"]=X["h.key"],a["h.d"]=X["h.d"],a["h.cr"]=X["h.cr"],a["h.t"]=X["h.t"],a["http.initiator"]="api",a["rt.start"]="api",ea!==!1&&(a["rt.si"]=ea,a["rt.ss"]=Math.round(ja+v),a["rt.sl"]=ka),a.api=1,a["api.v"]=2,a["api.l"]="js",a["api.lv"]=p,S("before_beacon",a);var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(encodeURIComponent(d)+"="+(void 0===a[d]||null===a[d]?"":encodeURIComponent(a[d])));var e=k(),f=e+(e.indexOf("?")>-1?"&":"?")+c.join("&");S("beacon",a),b(f)}function z(a){return"string"!=typeof a?-1:(ia++,ga[ia]={time:u(),name:a},ia)}function A(a){if("number"!=typeof a||0>a)return-1;var b=ga[a],c=0;return b?(c=Math.round(u()-b.time),B(b.name,c),delete ga[a],c):-1}function B(a,b){return"string"!=typeof a?-1:"number"!=typeof b||0>b?-1:(b=Math.round(b),w("timer",a,b),m(x),b)}function C(a,b){"string"==typeof a&&("undefined"==typeof b||"number"==typeof b)&&("undefined"==typeof b&&(b=1),w("metric",a,b),m(x))}function D(a){"string"==typeof a&&(aa=a)}function E(){return aa}function F(){aa=!1}function G(a){return"string"!=typeof a?!1:/^[a-zA-Z0-9_ -]{1,25}$/.test(a)===!1?!1:(ba=a,!0)}function H(){return ba}function I(){ba=!1}function J(a,b){return"undefined"!=typeof a?"undefined"==typeof b?void K(a):void(ca[a]=b):void 0}function K(a){"undefined"!=typeof a&&"undefined"!=typeof ca[a]&&delete ca[a]}function L(a){("string"==typeof a||"number"==typeof a)&&("number"==typeof a&&(a=""+a),ea=a)}function M(){return ea}function N(a){return L(a||d()),P(0),M()}function O(){ka++}function P(a){"number"!=typeof a||0>a||(ka=a)}function Q(){return ka}function R(a,b){la.hasOwnProperty(a)&&"function"==typeof b&&la[a].push(b)}function S(a,b){for(var c=0;c<la[a].length;c++)la[a][c](b)}h=h||{};var T=f,U=g,V="//c.go-mpulse.net/api/v2/config.json",W=!1,X={},Y=!1,Z=!1,$=[],_=!1,aa=!1,ba=!1,ca={},da={},ea=!1,fa={},ga={},ha={},ia=-1,ja=u(),ka=0,la={};for(s=0;s<r.length;s++)la[r[s]]=[];"undefined"!=typeof h.configUrl&&(V=h.configUrl),h.forceSSL&&(W=!0),q();var ma={startTimer:z,stopTimer:A,sendTimer:B,sendMetric:C,setPageGroup:D,getPageGroup:E,resetPageGroup:F,setABTest:G,getABTest:H,resetABTest:I,setDimension:J,resetDimension:K,setSessionID:L,getSessionID:M,startSession:N,incrementSessionLength:O,setSessionLength:P,getSessionLength:Q,subscribe:R,parseConfig:l};return ma}function g(){return y.mPulse=z,x}function h(a,b,d){if(d=d||{},"undefined"==typeof a)return void c("init(): You need to specify an apiKey");if("undefined"==typeof b)return void c("init(): You need to specify a secretKey");if("undefined"!=typeof d.name&&"undefined"!=typeof B[d.name])return B[d.name];var e=f(a,b,d);if(A===!1){A=e;for(var g=0;g<q.length;g++){var h=q[g];x[h]=A[h]}}return"undefined"!=typeof d.name&&(B[d.name]=e),e}function i(a){return B[a]}function j(){}function k(a){"undefined"!=typeof B[a]&&delete B[a]}var l,m,n=3e5,o=5e3,p="0.0.1",q=["startTimer","stopTimer","sendTimer","sendMetric","setPageGroup","getPageGroup","resetPageGroup","setABTest","getABTest","resetABTest","setDimension","resetDimension","setSessionID","getSessionID","startSession","incrementSessionLength","setSessionLength","getSessionLength","subscribe"],r=["before_beacon","beacon"],s=0,t=!1,u=!1,v=+new Date;if(m="undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick.bind(process):"undefined"!=typeof a?a.setImmediate?a.setImmediate.bind(a):a.msSetImmediate?a.msSetImmediate.bind(a):a.webkitSetImmediate?a.webkitSetImmediate.bind(a):a.mozSetImmediate?a.mozSetImmediate.bind(a):function(a){setTimeout(a,10)}:function(a){setTimeout(a,10)},"undefined"!=typeof a)if("undefined"!=typeof a.performance&&"function"==typeof a.performance.now)u=a.performance.now.bind(a.performance);else if("undefined"!=typeof a.performance){var w=["webkitNow","msNow","mozNow"];for(s=0;s<w.length;s++)if("function"==typeof a.performance[w[s]]){u=a.performance[w[s]];break}}u||("undefined"!=typeof a&&a.performance&&a.performance.timing&&a.performance.timing.navigationStart&&(v=a.performance.timing.navigationStart),u="undefined"!=typeof Date&&Date.now?function(){return Date.now()-v}:function(){return+new Date-v});var x,y,z,A=!1,B={};for("undefined"!=typeof a&&(y=a,z=y.mPulse),x={version:p,noConflict:g,init:h,getApp:i,stop:k},s=0;s<q.length;s++)x[q[s]]=j;"function"==typeof define&&define.amd?define([],function(){return x}):"undefined"!=typeof module&&module.exports?module.exports=x:"undefined"!=typeof y&&(y.mPulse=x)}("undefined"!=typeof window?window:void 0);
//# sourceMappingURL=mpulse.min.js.map