/*! mpulse v1.3.8 */

var CryptoJS=CryptoJS||function(c,e){var t={},n=t.lib={},i=n.Base=function(){function n(){}return{extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=n.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,o=e.sigBytes;if(this.clamp(),i%4)for(var r=0;r<o;r++){var s=n[r>>>2]>>>24-r%4*8&255;t[i+r>>>2]|=s<<24-(i+r)%4*8}else if(65535<n.length)for(r=0;r<o;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=c.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*c.random()|0);return new d.init(t,e)}}),o=t.enc={},r=o.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new d.init(n,t/2)}},s=o.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new d.init(n,t)}},a=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(s.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return s.parse(unescape(encodeURIComponent(e)))}},f=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=a.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,o=this.blockSize,r=i/(4*o),s=(r=e?c.ceil(r):c.max((0|r)-this._minBufferSize,0))*o,a=c.min(4*s,i);if(s){for(var f=0;f<s;f+=o)this._doProcessBlock(n,f);var u=n.splice(0,s);t.sigBytes-=a}return new d.init(u,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=(n.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new u.HMAC.init(n,t).finalize(e)}}}),t.algo={});return t}(Math);!function(o){var e=CryptoJS,t=e.lib,n=t.WordArray,i=t.Hasher,r=e.algo,s=[],w=[];!function(){function e(e){for(var t=o.sqrt(e),n=2;n<=t;n++)if(!(e%n))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var n=2,i=0;i<64;)e(n)&&(i<8&&(s[i]=t(o.pow(n,.5))),w[i]=t(o.pow(n,1/3)),i++),n++}();var S=[],a=r.SHA256=i.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],s=n[3],a=n[4],f=n[5],u=n[6],c=n[7],d=0;d<64;d++){if(d<16)S[d]=0|e[t+d];else{var p=S[d-15],h=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,l=S[d-2],m=(l<<15|l>>>17)^(l<<13|l>>>19)^l>>>10;S[d]=h+S[d-7]+m+S[d-16]}var g=i&o^i&r^o&r,v=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),y=c+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&f^~a&u)+w[d]+S[d];c=u,u=f,f=a,a=s+y|0,s=r,r=o,o=i,i=y+(v+g)|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+f|0,n[6]=n[6]+u|0,n[7]=n[7]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=o.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=i._createHelper(a),e.HmacSHA256=i._createHmacHelper(a)}(Math),function(){var e=CryptoJS,t=e.lib.Base,u=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=u.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),r=this._iKey=t.clone(),s=o.words,a=r.words,f=0;f<n;f++)s[f]^=1549556828,a[f]^=909522486;o.sigBytes=r.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}(),function(J){"use strict";var N,s,G=3e5,K=5e3,q="1.3.8",a=["startTimer","stopTimer","sendTimer","sendMetric","setPageGroup","getPageGroup","resetPageGroup","setABTest","getABTest","resetABTest","setDimension","resetDimension","setSessionID","getSessionID","startSession","incrementSessionLength","setSessionLength","getSessionLength","setSessionStart","getSessionStart","transferBoomerangSession","subscribe","sendBeacon","isInitialized","getConfig"],F=["before_beacon","beacon"],$=0,E=!1,e=+new Date;function W(e,t){var n="string"==typeof e?e:e.url,i=e&&e.ua,o=new Headers;i&&o.append("User-Agent",i),fetch(n,{method:"GET",headers:o}).then(function(e){e.text().then(t)})}if(N="undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick.bind(process):void 0!==J?J.setImmediate?J.setImmediate.bind(J):J.msSetImmediate?J.msSetImmediate.bind(J):J.webkitSetImmediate?J.webkitSetImmediate.bind(J):J.mozSetImmediate?J.mozSetImmediate.bind(J):function(e){setTimeout(e,10)}:function(e){setTimeout(e,10)},void 0!==J)if(void 0!==J.performance&&"function"==typeof J.performance.now)E=J.performance.now.bind(J.performance);else if(void 0!==J.performance){var t=["webkitNow","msNow","mozNow"];for($=0;$<t.length;$++)if("function"==typeof J.performance[t[$]]){E=J.performance[t[$]];break}}function Y(e){"object"==typeof console&&"function"==typeof console.warn&&console.warn("mPulse: "+e)}function f(e,t,n){var a=e,s=t,f="//c.go-mpulse.net/api/v2/config.json",i=(n=n||{}).ua,o=!1,u={},c=!1,d=!1,p=[],h=!1,r=!1,l=!1,m={},g={},v=!1,y={},w={},S={},x=-1,b=E(),_=0,B={};for($=0;$<F.length;$++)B[F[$]]=[];function O(e){return-1!==e.indexOf("http://")||-1!==e.indexOf("https://")||(o?e="https:"+e:void 0===J?-1===e.indexOf("http:")&&(e="http:"+e):void 0!==J&&"file:"===J.location.protocol&&-1===e.indexOf("http:")&&(e="http:"+e)),e}function P(){var e,t,n,i,o=f,r=+new Date;return-1!==o.indexOf("?")?o+="&":o+="?",o+="key="+a,o+="&t="+r,O(o+="&s="+(e=a,t=s,n=r,"function"!=typeof(i=void 0!==CryptoJS&&CryptoJS.HmacSHA256)&&"function"==typeof require&&(i=require("crypto-js/hmac-sha256")),"function"!=typeof i?(Y("CryptoJS libraries not found!  mpulse.js will not work."),""):i("key="+e+"&t="+n,t).toString()))}function C(e){try{var t=JSON.parse(e);for(var n in delete u.rate_limited,t)t.hasOwnProperty(n)&&(u[n]=t[n])}catch(e){return Y("config.json could not be parsed!"),void(d=!1)}if(!u.beacon_url||u.rate_limited)return Y("config.json shows rate limiting, no beacons will be sent!"),void(d=!1);if(v||R(u.session_id),y={},S={},g={},u.PageParams){var i=u.PageParams.customMetrics,o=u.PageParams.customTimers,r=u.PageParams.customDimensions;if(i)for($=0;$<i.length;$++){var s=i[$];y[s.name]=s.label}if(o)for($=0;$<o.length;$++){var a=o[$];S[a.name]=a.label}if(r)for($=0;$<r.length;$++){var f=r[$];g[f.name]=f.label}}c=d=!0,setTimeout(I,G),N(z)}function I(){if(""!==f){var e=P();c&&(e+="&r="),W({url:e,ua:i},C)}else Y("No config.json URL specified!")}function T(e,t,n){p.push({type:e,name:t,value:n,group:r,ab:l,dimensions:function(){var e={};for(var t in m)m.hasOwnProperty(t)&&(e[t]=m[t]);return e}(),when:+new Date})}function z(e){if(0!==p.length){if(!d)return Y("processQueue: Not yet initialized for "+a+", waiting "+K),void(h&&!e||(h=!0,setTimeout(function(){z(!0)},K)));var t=p.shift(),n=t.type,i=t.name,o=t.value,r={};for(var s in"boolean"!=typeof t.group&&(r["h.pg"]=t.group),"boolean"!=typeof t.ab&&(r["h.ab"]=t.ab),r["rt.tstart"]=r["rt.end"]=t.when,t.dimensions)t.dimensions.hasOwnProperty(s)&&(void 0!==g[s]?r[g[s]]=t.dimensions[s]:Y("Custom Dimension '"+s+"' is not defined"));"metric"===n?void 0!==y[i]?(r[y[i]]=o,D(r)):Y("Custom Metric '"+i+"' is not defined"):"timer"===n&&(void 0!==S[i]?(r.t_other=S[i]+"|"+o,D(r)):Y("Custom Timer '"+i+"' is not defined")),N(z)}}function D(e){var t;if(!d)return Y("sendBeacon: Not yet initialized for "+a+", waiting 1000"),setTimeout(function(){D(e)},1e3);e.ua&&(t=e.ua,delete e.ua),e.d=u.site_domain,e["h.key"]=u["h.key"],e["h.d"]=u["h.d"],e["h.cr"]=u["h.cr"],e["h.t"]=u["h.t"],e["http.initiator"]="api",!(e["rt.start"]="api")!==v&&(e["rt.si"]=v,e["rt.ss"]=b,e["rt.sl"]=_),e.api=1,e["api.v"]=2,e["api.l"]="js",e["api.lv"]=q,L("before_beacon",e);var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(encodeURIComponent(i)+"="+(void 0===e[i]||null===e[i]?"":encodeURIComponent(e[i])));var o,r=((o=u.beacon_url)||Y("No URL from config: "+JSON.stringify(u)),O(o)),s=r+(-1<r.indexOf("?")?"&":"?")+n.join("&");L("beacon",e),W({url:s,ua:t})}function M(e,t){return"string"!=typeof e?-1:"number"!=typeof t||t<0?-1:(T("timer",e,t=Math.round(t)),N(z),t)}function A(e){void 0!==e&&void 0!==m[e]&&delete m[e]}function H(e){"string"!=typeof e&&"number"!=typeof e||("number"==typeof e&&(e=""+e),v=e)}function k(){return v}function R(e){return H(e||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),U(0),j(E()),k()}function U(e){"number"!=typeof e||e<0||(_=e)}function j(e){"number"!=typeof e||e<0||(b=e)}function L(e,t){for(var n=0;n<B[e].length;n++)B[e][n](t)}return void 0!==n.configUrl&&(f=n.configUrl),n.forceSSL&&(o=!0),I(),{startTimer:function(e){return"string"!=typeof e?-1:(w[++x]={time:E(),name:e},x)},stopTimer:function(e){if("number"!=typeof e||e<0)return-1;var t=w[e],n=0;return t?(n=Math.round(E()-t.time),M(t.name,n),delete w[e],n):-1},sendTimer:M,sendMetric:function(e,t){"string"==typeof e&&(void 0!==t&&"number"!=typeof t||(void 0===t&&(t=1),T("metric",e,t),N(z)))},setPageGroup:function(e){"string"==typeof e&&(r=e)},getPageGroup:function(){return r},resetPageGroup:function(){r=!1},setABTest:function(e){return"string"==typeof e&&!1!==/^[a-zA-Z0-9_ -]{1,25}$/.test(e)&&(l=e,!0)},getABTest:function(){return l},resetABTest:function(){l=!1},setDimension:function(e,t){void 0!==e&&(void 0!==t?m[e]=t:A(e))},resetDimension:A,setSessionID:H,getSessionID:k,startSession:R,incrementSessionLength:function(){_++},setSessionLength:U,getSessionLength:function(){return _},setSessionStart:j,getSessionStart:function(){return b},transferBoomerangSession:function(e){return void 0===e&&void 0!==J&&(e=J),!!(void 0!==e&&e.BOOMR&&e.BOOMR.session&&e.BOOMR.session.ID&&e.BOOMR.session.start&&e.BOOMR.session.length)&&(H(e.BOOMR.session.ID+"-"+Math.round(e.BOOMR.session.start/1e3).toString(36)),U(e.BOOMR.session.length),j(e.BOOMR.session.start),!0)},subscribe:function(e,t){B.hasOwnProperty(e)&&"function"==typeof t&&B[e].push(t)},sendBeacon:D,isInitialized:function(){return d},getConfig:function(){return u},parseConfig:C}}void 0!==J&&"performance"in J&&J.performance&&J.performance.timing&&J.performance.timing.navigationStart&&(e=J.performance.timing.navigationStart),E||(E="undefined"!=typeof Date&&Date.now?function(){return Date.now()-e}:function(){return+new Date-e});var n,i,u=!1,c={};function o(){}for(void 0!==J&&(i=(n=J).mPulse),s={version:q,noConflict:function(){return n.mPulse=i,s},init:function(e,t,n){if(n=n||{},void 0!==e){if(void 0!==t){if(void 0!==n.name&&void 0!==c[n.name])return c[n.name];var i=f(e,t,n);if(!1===u){u=i;for(var o=0;o<a.length;o++){var r=a[o];s[r]=u[r]}}return void 0!==n.name&&(c[n.name]=i),i}Y("init(): You need to specify a secretKey")}else Y("init(): You need to specify an apiKey")},getApp:function(e){return c[e]},stop:function(e){void 0!==c[e]&&delete c[e]},now:E},$=0;$<a.length;$++)s[a[$]]=o;"function"==typeof define&&define.amd?define([],function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:void 0!==n&&(n.mPulse=s)}("undefined"!=typeof window?window:void 0);
//# sourceMappingURL=mpulse.min.js.map